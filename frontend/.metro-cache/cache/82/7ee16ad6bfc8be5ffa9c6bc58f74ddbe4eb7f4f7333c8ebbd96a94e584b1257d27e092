{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":56,"index":187}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _configApi = require(_dependencyMap[3], \"../config/api\");\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    error: null,\n    login: async (email, password) => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const response = await axios.default.post(`${_configApi.API_BASE_URL}${_configApi.ENDPOINTS.login}`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n        return true;\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Login failed';\n        set({\n          error: message,\n          isLoading: false\n        });\n        return false;\n      }\n    },\n    register: async (name, email, password) => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        console.log('[Auth] Registering user:', email);\n        console.log('[Auth] API URL:', `${_configApi.API_BASE_URL}${_configApi.ENDPOINTS.register}`);\n        const response = await axios.default.post(`${_configApi.API_BASE_URL}${_configApi.ENDPOINTS.register}`, {\n          name,\n          email,\n          password\n        });\n        console.log('[Auth] Registration successful:', response.data);\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n        return true;\n      } catch (error) {\n        console.error('[Auth] Registration error:', error.message);\n        console.error('[Auth] Response:', error.response?.data);\n        const message = error.response?.data?.detail || error.message || 'Registration failed';\n        set({\n          error: message,\n          isLoading: false\n        });\n        return false;\n      }\n    },\n    logout: async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false\n      });\n    },\n    loadStoredAuth: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userStr = await AsyncStorage.default.getItem('user');\n        if (token && userStr) {\n          const user = JSON.parse(userStr);\n\n          // Verify token is still valid by making a test request\n          try {\n            await axios.default.get(`${_configApi.API_BASE_URL}${_configApi.ENDPOINTS.stats}`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n\n            // Token is valid\n            set({\n              user,\n              token,\n              isAuthenticated: true,\n              isLoading: false\n            });\n          } catch (error) {\n            // Token is invalid (401), clear stored auth\n            console.log('[Auth] Stored token invalid, clearing...');\n            await AsyncStorage.default.removeItem('token');\n            await AsyncStorage.default.removeItem('user');\n            set({\n              isLoading: false\n            });\n          }\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n      }\n    },\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":155,"map":[[12,2,27,0,"Object"],[12,8,27,0],[12,9,27,0,"defineProperty"],[12,23,27,0],[12,24,27,0,"exports"],[12,31,27,0],[13,4,27,0,"enumerable"],[13,14,27,0],[14,4,27,0,"get"],[14,7,27,0],[14,18,27,0,"get"],[14,19,27,0],[15,6,27,0],[15,13,27,0,"useAuthStore"],[15,25,27,0],[16,4,27,0],[17,2,27,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,4,0],[23,6,4,0,"_configApi"],[23,16,4,0],[23,19,4,0,"require"],[23,26,4,0],[23,27,4,0,"_dependencyMap"],[23,41,4,0],[24,2,27,7],[24,8,27,13,"useAuthStore"],[24,20,27,25],[24,23,27,28],[24,27,27,28,"create"],[24,35,27,34],[24,36,27,34,"create"],[24,42,27,34],[24,44,27,46],[24,45,27,47,"set"],[24,48,27,50],[24,50,27,52,"get"],[24,53,27,55],[24,59,27,61],[25,4,28,2,"user"],[25,8,28,6],[25,10,28,8],[25,14,28,12],[26,4,29,2,"token"],[26,9,29,7],[26,11,29,9],[26,15,29,13],[27,4,30,2,"isLoading"],[27,13,30,11],[27,15,30,13],[27,19,30,17],[28,4,31,2,"isAuthenticated"],[28,19,31,17],[28,21,31,19],[28,26,31,24],[29,4,32,2,"error"],[29,9,32,7],[29,11,32,9],[29,15,32,13],[30,4,34,2,"login"],[30,9,34,7],[30,11,34,9],[30,17,34,9,"login"],[30,18,34,16,"email"],[30,23,34,29],[30,25,34,31,"password"],[30,33,34,47],[30,38,34,52],[31,6,35,4,"set"],[31,9,35,7],[31,10,35,8],[32,8,35,10,"isLoading"],[32,17,35,19],[32,19,35,21],[32,23,35,25],[33,8,35,27,"error"],[33,13,35,32],[33,15,35,34],[34,6,35,39],[34,7,35,40],[34,8,35,41],[35,6,36,4],[35,10,36,8],[36,8,37,6],[36,14,37,12,"response"],[36,22,37,20],[36,25,37,23],[36,31,37,29,"axios"],[36,36,37,34],[36,37,37,34,"default"],[36,44,37,34],[36,45,37,35,"post"],[36,49,37,39],[36,50,37,40],[36,53,37,43,"API_BASE_URL"],[36,63,37,55],[36,64,37,55,"API_BASE_URL"],[36,76,37,55],[36,79,37,58,"ENDPOINTS"],[36,89,37,67],[36,90,37,67,"ENDPOINTS"],[36,99,37,67],[36,100,37,68,"login"],[36,105,37,73],[36,107,37,75],[36,109,37,77],[37,10,38,8,"email"],[37,15,38,13],[38,10,39,8,"password"],[39,8,40,6],[39,9,40,7],[39,10,40,8],[40,8,42,6],[40,14,42,12],[41,10,42,14,"access_token"],[41,22,42,26],[42,10,42,28,"user"],[43,8,42,33],[43,9,42,34],[43,12,42,37,"response"],[43,20,42,45],[43,21,42,46,"data"],[43,25,42,50],[44,8,44,6],[44,14,44,12,"AsyncStorage"],[44,26,44,24],[44,27,44,24,"default"],[44,34,44,24],[44,35,44,25,"setItem"],[44,42,44,32],[44,43,44,33],[44,50,44,40],[44,52,44,42,"access_token"],[44,64,44,54],[44,65,44,55],[45,8,45,6],[45,14,45,12,"AsyncStorage"],[45,26,45,24],[45,27,45,24,"default"],[45,34,45,24],[45,35,45,25,"setItem"],[45,42,45,32],[45,43,45,33],[45,49,45,39],[45,51,45,41,"JSON"],[45,55,45,45],[45,56,45,46,"stringify"],[45,65,45,55],[45,66,45,56,"user"],[45,70,45,60],[45,71,45,61],[45,72,45,62],[46,8,47,6,"set"],[46,11,47,9],[46,12,47,10],[47,10,48,8,"user"],[47,14,48,12],[48,10,49,8,"token"],[48,15,49,13],[48,17,49,15,"access_token"],[48,29,49,27],[49,10,50,8,"isAuthenticated"],[49,25,50,23],[49,27,50,25],[49,31,50,29],[50,10,51,8,"isLoading"],[50,19,51,17],[50,21,51,19],[51,8,52,6],[51,9,52,7],[51,10,52,8],[52,8,54,6],[52,15,54,13],[52,19,54,17],[53,6,55,4],[53,7,55,5],[53,8,55,6],[53,15,55,13,"error"],[53,20,55,23],[53,22,55,25],[54,8,56,6],[54,14,56,12,"message"],[54,21,56,19],[54,24,56,22,"error"],[54,29,56,27],[54,30,56,28,"response"],[54,38,56,36],[54,40,56,38,"data"],[54,44,56,42],[54,46,56,44,"detail"],[54,52,56,50],[54,56,56,54],[54,70,56,68],[55,8,57,6,"set"],[55,11,57,9],[55,12,57,10],[56,10,57,12,"error"],[56,15,57,17],[56,17,57,19,"message"],[56,24,57,26],[57,10,57,28,"isLoading"],[57,19,57,37],[57,21,57,39],[58,8,57,45],[58,9,57,46],[58,10,57,47],[59,8,58,6],[59,15,58,13],[59,20,58,18],[60,6,59,4],[61,4,60,2],[61,5,60,3],[62,4,62,2,"register"],[62,12,62,10],[62,14,62,12],[62,20,62,12,"register"],[62,21,62,19,"name"],[62,25,62,31],[62,27,62,33,"email"],[62,32,62,46],[62,34,62,48,"password"],[62,42,62,64],[62,47,62,69],[63,6,63,4,"set"],[63,9,63,7],[63,10,63,8],[64,8,63,10,"isLoading"],[64,17,63,19],[64,19,63,21],[64,23,63,25],[65,8,63,27,"error"],[65,13,63,32],[65,15,63,34],[66,6,63,39],[66,7,63,40],[66,8,63,41],[67,6,64,4],[67,10,64,8],[68,8,65,6,"console"],[68,15,65,13],[68,16,65,14,"log"],[68,19,65,17],[68,20,65,18],[68,46,65,44],[68,48,65,46,"email"],[68,53,65,51],[68,54,65,52],[69,8,66,6,"console"],[69,15,66,13],[69,16,66,14,"log"],[69,19,66,17],[69,20,66,18],[69,37,66,35],[69,39,66,37],[69,42,66,40,"API_BASE_URL"],[69,52,66,52],[69,53,66,52,"API_BASE_URL"],[69,65,66,52],[69,68,66,55,"ENDPOINTS"],[69,78,66,64],[69,79,66,64,"ENDPOINTS"],[69,88,66,64],[69,89,66,65,"register"],[69,97,66,73],[69,99,66,75],[69,100,66,76],[70,8,68,6],[70,14,68,12,"response"],[70,22,68,20],[70,25,68,23],[70,31,68,29,"axios"],[70,36,68,34],[70,37,68,34,"default"],[70,44,68,34],[70,45,68,35,"post"],[70,49,68,39],[70,50,68,40],[70,53,68,43,"API_BASE_URL"],[70,63,68,55],[70,64,68,55,"API_BASE_URL"],[70,76,68,55],[70,79,68,58,"ENDPOINTS"],[70,89,68,67],[70,90,68,67,"ENDPOINTS"],[70,99,68,67],[70,100,68,68,"register"],[70,108,68,76],[70,110,68,78],[70,112,68,80],[71,10,69,8,"name"],[71,14,69,12],[72,10,70,8,"email"],[72,15,70,13],[73,10,71,8,"password"],[74,8,72,6],[74,9,72,7],[74,10,72,8],[75,8,74,6,"console"],[75,15,74,13],[75,16,74,14,"log"],[75,19,74,17],[75,20,74,18],[75,53,74,51],[75,55,74,53,"response"],[75,63,74,61],[75,64,74,62,"data"],[75,68,74,66],[75,69,74,67],[76,8,75,6],[76,14,75,12],[77,10,75,14,"access_token"],[77,22,75,26],[78,10,75,28,"user"],[79,8,75,33],[79,9,75,34],[79,12,75,37,"response"],[79,20,75,45],[79,21,75,46,"data"],[79,25,75,50],[80,8,77,6],[80,14,77,12,"AsyncStorage"],[80,26,77,24],[80,27,77,24,"default"],[80,34,77,24],[80,35,77,25,"setItem"],[80,42,77,32],[80,43,77,33],[80,50,77,40],[80,52,77,42,"access_token"],[80,64,77,54],[80,65,77,55],[81,8,78,6],[81,14,78,12,"AsyncStorage"],[81,26,78,24],[81,27,78,24,"default"],[81,34,78,24],[81,35,78,25,"setItem"],[81,42,78,32],[81,43,78,33],[81,49,78,39],[81,51,78,41,"JSON"],[81,55,78,45],[81,56,78,46,"stringify"],[81,65,78,55],[81,66,78,56,"user"],[81,70,78,60],[81,71,78,61],[81,72,78,62],[82,8,80,6,"set"],[82,11,80,9],[82,12,80,10],[83,10,81,8,"user"],[83,14,81,12],[84,10,82,8,"token"],[84,15,82,13],[84,17,82,15,"access_token"],[84,29,82,27],[85,10,83,8,"isAuthenticated"],[85,25,83,23],[85,27,83,25],[85,31,83,29],[86,10,84,8,"isLoading"],[86,19,84,17],[86,21,84,19],[87,8,85,6],[87,9,85,7],[87,10,85,8],[88,8,87,6],[88,15,87,13],[88,19,87,17],[89,6,88,4],[89,7,88,5],[89,8,88,6],[89,15,88,13,"error"],[89,20,88,23],[89,22,88,25],[90,8,89,6,"console"],[90,15,89,13],[90,16,89,14,"error"],[90,21,89,19],[90,22,89,20],[90,50,89,48],[90,52,89,50,"error"],[90,57,89,55],[90,58,89,56,"message"],[90,65,89,63],[90,66,89,64],[91,8,90,6,"console"],[91,15,90,13],[91,16,90,14,"error"],[91,21,90,19],[91,22,90,20],[91,40,90,38],[91,42,90,40,"error"],[91,47,90,45],[91,48,90,46,"response"],[91,56,90,54],[91,58,90,56,"data"],[91,62,90,60],[91,63,90,61],[92,8,91,6],[92,14,91,12,"message"],[92,21,91,19],[92,24,91,22,"error"],[92,29,91,27],[92,30,91,28,"response"],[92,38,91,36],[92,40,91,38,"data"],[92,44,91,42],[92,46,91,44,"detail"],[92,52,91,50],[92,56,91,54,"error"],[92,61,91,59],[92,62,91,60,"message"],[92,69,91,67],[92,73,91,71],[92,94,91,92],[93,8,92,6,"set"],[93,11,92,9],[93,12,92,10],[94,10,92,12,"error"],[94,15,92,17],[94,17,92,19,"message"],[94,24,92,26],[95,10,92,28,"isLoading"],[95,19,92,37],[95,21,92,39],[96,8,92,45],[96,9,92,46],[96,10,92,47],[97,8,93,6],[97,15,93,13],[97,20,93,18],[98,6,94,4],[99,4,95,2],[99,5,95,3],[100,4,97,2,"logout"],[100,10,97,8],[100,12,97,10],[100,18,97,10,"logout"],[100,19,97,10],[100,24,97,22],[101,6,98,4],[101,12,98,10,"AsyncStorage"],[101,24,98,22],[101,25,98,22,"default"],[101,32,98,22],[101,33,98,23,"removeItem"],[101,43,98,33],[101,44,98,34],[101,51,98,41],[101,52,98,42],[102,6,99,4],[102,12,99,10,"AsyncStorage"],[102,24,99,22],[102,25,99,22,"default"],[102,32,99,22],[102,33,99,23,"removeItem"],[102,43,99,33],[102,44,99,34],[102,50,99,40],[102,51,99,41],[103,6,100,4,"set"],[103,9,100,7],[103,10,100,8],[104,8,101,6,"user"],[104,12,101,10],[104,14,101,12],[104,18,101,16],[105,8,102,6,"token"],[105,13,102,11],[105,15,102,13],[105,19,102,17],[106,8,103,6,"isAuthenticated"],[106,23,103,21],[106,25,103,23],[107,6,104,4],[107,7,104,5],[107,8,104,6],[108,4,105,2],[108,5,105,3],[109,4,107,2,"loadStoredAuth"],[109,18,107,16],[109,20,107,18],[109,26,107,18,"loadStoredAuth"],[109,27,107,18],[109,32,107,30],[110,6,108,4],[110,10,108,8],[111,8,109,6],[111,14,109,12,"token"],[111,19,109,17],[111,22,109,20],[111,28,109,26,"AsyncStorage"],[111,40,109,38],[111,41,109,38,"default"],[111,48,109,38],[111,49,109,39,"getItem"],[111,56,109,46],[111,57,109,47],[111,64,109,54],[111,65,109,55],[112,8,110,6],[112,14,110,12,"userStr"],[112,21,110,19],[112,24,110,22],[112,30,110,28,"AsyncStorage"],[112,42,110,40],[112,43,110,40,"default"],[112,50,110,40],[112,51,110,41,"getItem"],[112,58,110,48],[112,59,110,49],[112,65,110,55],[112,66,110,56],[113,8,112,6],[113,12,112,10,"token"],[113,17,112,15],[113,21,112,19,"userStr"],[113,28,112,26],[113,30,112,28],[114,10,113,8],[114,16,113,14,"user"],[114,20,113,18],[114,23,113,21,"JSON"],[114,27,113,25],[114,28,113,26,"parse"],[114,33,113,31],[114,34,113,32,"userStr"],[114,41,113,39],[114,42,113,40],[116,10,115,8],[117,10,116,8],[117,14,116,12],[118,12,117,10],[118,18,117,16,"axios"],[118,23,117,21],[118,24,117,21,"default"],[118,31,117,21],[118,32,117,22,"get"],[118,35,117,25],[118,36,117,26],[118,39,117,29,"API_BASE_URL"],[118,49,117,41],[118,50,117,41,"API_BASE_URL"],[118,62,117,41],[118,65,117,44,"ENDPOINTS"],[118,75,117,53],[118,76,117,53,"ENDPOINTS"],[118,85,117,53],[118,86,117,54,"stats"],[118,91,117,59],[118,93,117,61],[118,95,117,63],[119,14,118,12,"headers"],[119,21,118,19],[119,23,118,21],[120,16,118,23,"Authorization"],[120,29,118,36],[120,31,118,38],[120,41,118,48,"token"],[120,46,118,53],[121,14,118,56],[122,12,119,10],[122,13,119,11],[122,14,119,12],[124,12,121,10],[125,12,122,10,"set"],[125,15,122,13],[125,16,122,14],[126,14,123,12,"user"],[126,18,123,16],[127,14,124,12,"token"],[127,19,124,17],[128,14,125,12,"isAuthenticated"],[128,29,125,27],[128,31,125,29],[128,35,125,33],[129,14,126,12,"isLoading"],[129,23,126,21],[129,25,126,23],[130,12,127,10],[130,13,127,11],[130,14,127,12],[131,10,128,8],[131,11,128,9],[131,12,128,10],[131,19,128,17,"error"],[131,24,128,27],[131,26,128,29],[132,12,129,10],[133,12,130,10,"console"],[133,19,130,17],[133,20,130,18,"log"],[133,23,130,21],[133,24,130,22],[133,66,130,64],[133,67,130,65],[134,12,131,10],[134,18,131,16,"AsyncStorage"],[134,30,131,28],[134,31,131,28,"default"],[134,38,131,28],[134,39,131,29,"removeItem"],[134,49,131,39],[134,50,131,40],[134,57,131,47],[134,58,131,48],[135,12,132,10],[135,18,132,16,"AsyncStorage"],[135,30,132,28],[135,31,132,28,"default"],[135,38,132,28],[135,39,132,29,"removeItem"],[135,49,132,39],[135,50,132,40],[135,56,132,46],[135,57,132,47],[136,12,133,10,"set"],[136,15,133,13],[136,16,133,14],[137,14,133,16,"isLoading"],[137,23,133,25],[137,25,133,27],[138,12,133,33],[138,13,133,34],[138,14,133,35],[139,10,134,8],[140,8,135,6],[140,9,135,7],[140,15,135,13],[141,10,136,8,"set"],[141,13,136,11],[141,14,136,12],[142,12,136,14,"isLoading"],[142,21,136,23],[142,23,136,25],[143,10,136,31],[143,11,136,32],[143,12,136,33],[144,8,137,6],[145,6,138,4],[145,7,138,5],[145,8,138,6],[145,15,138,13,"error"],[145,20,138,18],[145,22,138,20],[146,8,139,6,"set"],[146,11,139,9],[146,12,139,10],[147,10,139,12,"isLoading"],[147,19,139,21],[147,21,139,23],[148,8,139,29],[148,9,139,30],[148,10,139,31],[149,6,140,4],[150,4,141,2],[150,5,141,3],[151,4,143,2,"clearError"],[151,14,143,12],[151,16,143,14,"clearError"],[151,17,143,14],[151,22,143,20,"set"],[151,25,143,23],[151,26,143,24],[152,6,143,26,"error"],[152,11,143,31],[152,13,143,33],[153,4,143,38],[153,5,143,39],[154,2,144,0],[154,3,144,1],[154,4,144,2],[154,5,144,3],[155,0,144,4],[155,3]],"functionMap":{"names":["<global>","create$argument_0","login","register","logout","loadStoredAuth","clearError"],"mappings":"AAA;8CC0B;SCO;GD0B;YEE;GFiC;UGE;GHQ;kBIE;GJkC;cKE,0BL;EDC"},"hasCjsExports":false},"type":"js/module"}]}